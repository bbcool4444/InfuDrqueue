<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mental ray Interface: shader_framebuffer.h Source File</title>
<link href="mi_iface.css" rel="stylesheet" type="text/css">
</head>
<body>
<ul class="nav">
<li><a href="index.html">home</a></li>
<li><a href="shader_if_cpp.html">up</a></li>
<li><a href="globalindex.html">index</a></li>
</ul>

<!-- Generated by Doxygen 1.5.6 -->
<h1>shader_framebuffer.h</h1><a href="shader__framebuffer_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="comment">// Copyright 1986-2009 by mental images GmbH, Fasanenstr. 81, D-10623 Berlin,</span>
<a name="l00003"></a>00003 <span class="comment">// Germany. All rights reserved.</span>
<a name="l00005"></a>00005 <span class="comment"></span><span class="comment">// Created:     27.02.08</span>
<a name="l00006"></a>00006 <span class="comment">// Module:      api</span>
<a name="l00007"></a>00007 <span class="comment">// Purpose:     mental ray C++ shader interface extensions</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#ifndef SHADER_FRAMEBUFFER_H</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#define SHADER_FRAMEBUFFER_H</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#include "<a class="code" href="mi__shader__if_8h.html">mi_shader_if.h</a>"</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="keyword">namespace </span>mi {
<a name="l00025"></a>00025 <span class="keyword">namespace </span>shader_v3 {
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 
<a name="l00039"></a><a class="code" href="classmi_1_1shader__v3_1_1Framebuffer.html">00039</a> <span class="keyword">class </span><a class="code" href="classmi_1_1shader__v3_1_1Framebuffer.html" title="Framebuffer class.">Framebuffer</a> {
<a name="l00040"></a>00040     <span class="keyword">public</span>:
<a name="l00045"></a>00045         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <span class="keyword">set</span>(
<a name="l00046"></a>00046             <span class="keyword">const</span> <span class="keywordtype">char</span>  *buffer, 
<a name="l00047"></a>00047             <span class="keyword">const</span> <span class="keywordtype">char</span>  *param, 
<a name="l00048"></a>00048             <span class="keyword">const</span>       <span class="keywordtype">bool</span> value) = 0;
<a name="l00049"></a>00049 
<a name="l00054"></a>00054         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <span class="keyword">set</span>(
<a name="l00055"></a>00055             <span class="keyword">const</span> <span class="keywordtype">char</span>  *buffer, 
<a name="l00056"></a>00056             <span class="keyword">const</span> <span class="keywordtype">char</span>  *param, 
<a name="l00057"></a>00057             <span class="keyword">const</span> <span class="keywordtype">float</span> value) = 0;
<a name="l00058"></a>00058 
<a name="l00063"></a>00063         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <span class="keyword">set</span>(
<a name="l00064"></a>00064             <span class="keyword">const</span> <span class="keywordtype">char</span>  *buffer, 
<a name="l00065"></a>00065             <span class="keyword">const</span> <span class="keywordtype">char</span>  *param, 
<a name="l00066"></a>00066             <span class="keyword">const</span> <span class="keywordtype">int</span>   value) = 0;
<a name="l00067"></a>00067 
<a name="l00072"></a>00072         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <span class="keyword">set</span>(
<a name="l00073"></a>00073             <span class="keyword">const</span> <span class="keywordtype">char</span>  *buffer, 
<a name="l00074"></a>00074             <span class="keyword">const</span> <span class="keywordtype">char</span>  *param, 
<a name="l00075"></a>00075             <span class="keyword">const</span> <span class="keywordtype">char</span>  *value) = 0;
<a name="l00076"></a>00076 
<a name="l00083"></a>00083         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <span class="keyword">get</span>(
<a name="l00084"></a>00084             <span class="keyword">const</span> <span class="keywordtype">char</span>  *buffer, 
<a name="l00085"></a>00085             <span class="keyword">const</span> <span class="keywordtype">char</span>  *param, 
<a name="l00086"></a>00086             <span class="keywordtype">bool</span>        &amp;value) <span class="keyword">const</span> = 0;
<a name="l00087"></a>00087 
<a name="l00094"></a>00094         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <span class="keyword">get</span>(
<a name="l00095"></a>00095             <span class="keyword">const</span> <span class="keywordtype">char</span>  *buffer, 
<a name="l00096"></a>00096             <span class="keyword">const</span> <span class="keywordtype">char</span>  *param, 
<a name="l00097"></a>00097             <span class="keywordtype">float</span>       &amp;value) <span class="keyword">const</span> = 0;
<a name="l00098"></a>00098 
<a name="l00105"></a>00105         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <span class="keyword">get</span>(
<a name="l00106"></a>00106             <span class="keyword">const</span> <span class="keywordtype">char</span>  *buffer, 
<a name="l00107"></a>00107             <span class="keyword">const</span> <span class="keywordtype">char</span>  *param, 
<a name="l00108"></a>00108             <span class="keywordtype">int</span>         &amp;value) <span class="keyword">const</span> = 0;
<a name="l00109"></a>00109 
<a name="l00116"></a>00116         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <span class="keyword">get</span>(
<a name="l00117"></a>00117             <span class="keyword">const</span> <span class="keywordtype">char</span>  *buffer, 
<a name="l00118"></a>00118             <span class="keyword">const</span> <span class="keywordtype">char</span>  *param, 
<a name="l00119"></a>00119             <span class="keyword">const</span> <span class="keywordtype">char</span>  *&amp;value) <span class="keyword">const</span> = 0;
<a name="l00120"></a>00120 
<a name="l00127"></a>00127         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classmi_1_1shader__v3_1_1Framebuffer.html#0028c5adb63aea730c3164542321edf5" title="get an index of the framebuffer to be used in mi_fb_put and mi_fb_get functions.">get_index</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *buffer, <span class="keywordtype">size_t</span> &amp;index) <span class="keyword">const</span> = 0;
<a name="l00128"></a>00128 
<a name="l00132"></a>00132         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classmi_1_1shader__v3_1_1Framebuffer.html#e11253d3dc03bc1edf512c797dbdbbdf" title="removes all named buffers. It is not legal to call this method during the rendering...">reset</a>() = 0;
<a name="l00133"></a>00133 
<a name="l00135"></a>00135         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classmi_1_1shader__v3_1_1Framebuffer.html#49ec4d30388a4a9e05a046fcfaf14a28" title="echoes mi syntax for the framebuffer to the file pointer.">echo</a>(FILE *) <span class="keyword">const</span> = 0;
<a name="l00136"></a>00136 
<a name="l00140"></a>00140         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classmi_1_1shader__v3_1_1Framebuffer.html#10c37999cbbc0603ed15b4a87681e9e4" title="get the count of buffers defined.">get_buffercount</a>(<span class="keywordtype">size_t</span> &amp;buffercount) <span class="keyword">const</span> = 0;
<a name="l00141"></a>00141 
<a name="l00148"></a>00148         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classmi_1_1shader__v3_1_1Framebuffer.html#039a044cea6fb584784df9776ee674e4" title="get the name of buffer num. Note that num is not related to the index returned by...">get_buffername</a>(<span class="keywordtype">size_t</span> num, <span class="keyword">const</span> <span class="keywordtype">char</span> *&amp;name) <span class="keyword">const</span> = 0;
<a name="l00149"></a>00149 
<a name="l00153"></a>00153         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <span class="keyword">remove</span>(<span class="keyword">const</span> <span class="keywordtype">char</span> *buffer) = 0;
<a name="l00154"></a>00154 };
<a name="l00155"></a>00155 
<a name="l00160"></a><a class="code" href="classmi_1_1shader__v3_1_1Access__fb.html">00160</a> <span class="keyword">class </span><a class="code" href="classmi_1_1shader__v3_1_1Access__fb.html" title="Smart pointer to access Framebuffer class, no editing.">Access_fb</a> {
<a name="l00161"></a>00161     <span class="keyword">public</span>:
<a name="l00164"></a>00164         <a class="code" href="classmi_1_1shader__v3_1_1Access__fb.html" title="Smart pointer to access Framebuffer class, no editing.">Access_fb</a>(
<a name="l00165"></a>00165             miTag tag);
<a name="l00166"></a>00166 
<a name="l00168"></a>00168         <a class="code" href="classmi_1_1shader__v3_1_1Access__fb.html#c471799ff180f5e836f2395f476be05c" title="release resources, unpin database tag">~Access_fb</a>();
<a name="l00169"></a>00169 
<a name="l00171"></a>00171         <span class="keyword">const</span> <a class="code" href="classmi_1_1shader__v3_1_1Framebuffer.html" title="Framebuffer class.">Framebuffer</a> * <a class="code" href="classmi_1_1shader__v3_1_1Access__fb.html#de7dbde11a4b1e6f876fc44c3044b115" title="reference the Framebuffer class, read-only access">operator-&gt;</a>() <span class="keyword">const</span>;
<a name="l00172"></a>00172     <span class="keyword">private</span>:
<a name="l00173"></a>00173         <a class="code" href="classmi_1_1shader__v3_1_1Access__fb.html" title="Smart pointer to access Framebuffer class, no editing.">Access_fb</a>();
<a name="l00174"></a>00174         <a class="code" href="classmi_1_1shader__v3_1_1Access__fb.html" title="Smart pointer to access Framebuffer class, no editing.">Access_fb</a>(<span class="keyword">const</span> <a class="code" href="classmi_1_1shader__v3_1_1Access__fb.html" title="Smart pointer to access Framebuffer class, no editing.">Access_fb</a> &amp;);
<a name="l00175"></a>00175         <span class="keyword">const</span> <a class="code" href="classmi_1_1shader__v3_1_1Access__fb.html" title="Smart pointer to access Framebuffer class, no editing.">Access_fb</a> &amp; operator=(<span class="keyword">const</span> <a class="code" href="classmi_1_1shader__v3_1_1Access__fb.html" title="Smart pointer to access Framebuffer class, no editing.">Access_fb</a> &amp;);
<a name="l00176"></a>00176         <a class="code" href="structmi_1_1shader__v3_1_1Interface.html" title="Top level C++ mental ray interface extensions.">mi::shader_v3::Interface</a>        *m_iface;
<a name="l00177"></a>00177         <span class="keyword">const</span> <a class="code" href="classmi_1_1shader__v3_1_1Framebuffer.html" title="Framebuffer class.">Framebuffer</a>               *<span class="keyword">const</span> m_fb;
<a name="l00178"></a>00178         <span class="keyword">const</span> miTag                     m_tag;
<a name="l00179"></a>00179 };
<a name="l00180"></a>00180 
<a name="l00181"></a>00181 
<a name="l00185"></a>00185 
<a name="l00186"></a><a class="code" href="classmi_1_1shader__v3_1_1Edit__fb.html">00186</a> <span class="keyword">class </span><a class="code" href="classmi_1_1shader__v3_1_1Edit__fb.html" title="Smart pointer to access Framebuffer class for editing.">Edit_fb</a> {
<a name="l00187"></a>00187     <span class="keyword">public</span>:
<a name="l00190"></a>00190         <a class="code" href="classmi_1_1shader__v3_1_1Edit__fb.html" title="Smart pointer to access Framebuffer class for editing.">Edit_fb</a>(
<a name="l00191"></a>00191             miTag tag);
<a name="l00192"></a>00192 
<a name="l00194"></a>00194         <a class="code" href="classmi_1_1shader__v3_1_1Edit__fb.html#697878b52dd0a0bc7be5f552ebc4044c" title="release resources, unpin database tag">~Edit_fb</a>();
<a name="l00195"></a>00195 
<a name="l00197"></a>00197         <a class="code" href="classmi_1_1shader__v3_1_1Framebuffer.html" title="Framebuffer class.">Framebuffer</a> * <a class="code" href="classmi_1_1shader__v3_1_1Edit__fb.html#5e0f7170e0cc14dcbd76781d6450abd7" title="reference the Framebuffer class, read-write access">operator-&gt;</a>() <span class="keyword">const</span>;
<a name="l00198"></a>00198     <span class="keyword">private</span>:
<a name="l00199"></a>00199         <a class="code" href="classmi_1_1shader__v3_1_1Edit__fb.html" title="Smart pointer to access Framebuffer class for editing.">Edit_fb</a>();
<a name="l00200"></a>00200         <a class="code" href="classmi_1_1shader__v3_1_1Edit__fb.html" title="Smart pointer to access Framebuffer class for editing.">Edit_fb</a>(<span class="keyword">const</span> <a class="code" href="classmi_1_1shader__v3_1_1Edit__fb.html" title="Smart pointer to access Framebuffer class for editing.">Edit_fb</a> &amp;);
<a name="l00201"></a>00201         <span class="keyword">const</span> <a class="code" href="classmi_1_1shader__v3_1_1Edit__fb.html" title="Smart pointer to access Framebuffer class for editing.">Edit_fb</a> &amp; operator=(<span class="keyword">const</span> <a class="code" href="classmi_1_1shader__v3_1_1Edit__fb.html" title="Smart pointer to access Framebuffer class for editing.">Edit_fb</a> &amp;);
<a name="l00202"></a>00202         <a class="code" href="structmi_1_1shader__v3_1_1Interface.html" title="Top level C++ mental ray interface extensions.">mi::shader_v3::Interface</a>        *m_iface;
<a name="l00203"></a>00203         <a class="code" href="classmi_1_1shader__v3_1_1Framebuffer.html" title="Framebuffer class.">Framebuffer</a>                     *<span class="keyword">const</span> m_fb;
<a name="l00204"></a>00204         <span class="keyword">const</span> miTag                     m_tag;
<a name="l00205"></a>00205 };
<a name="l00206"></a>00206 
<a name="l00209"></a><a class="code" href="classmi_1_1shader__v3_1_1Access__fb.html#d49c1c6273db800aad5dbce94cccae30">00209</a> <span class="keyword">inline</span> Access_fb::Access_fb(
<a name="l00210"></a>00210     miTag tag)
<a name="l00211"></a>00211   : m_iface(<a class="code" href="mi__shader__if_8h.html#c437703a9041a1930a4c50032f6669ad" title="Acquire an instance of the mental ray C++ shader interface extensions.">mi_get_shader_interface</a>())
<a name="l00212"></a>00212   , m_fb(m_iface-&gt;accessFramebuffer(tag))
<a name="l00213"></a>00213   , m_tag(tag)
<a name="l00214"></a>00214 {
<a name="l00215"></a>00215 }
<a name="l00216"></a>00216 
<a name="l00217"></a><a class="code" href="classmi_1_1shader__v3_1_1Access__fb.html#c471799ff180f5e836f2395f476be05c">00217</a> <span class="keyword">inline</span> Access_fb::~Access_fb()
<a name="l00218"></a>00218 {
<a name="l00219"></a>00219     <span class="keywordflow">if</span> (m_fb != 0) {
<a name="l00220"></a>00220         m_iface-&gt;releaseFramebuffer(m_fb, m_tag);
<a name="l00221"></a>00221     }
<a name="l00222"></a>00222     m_iface-&gt;<a class="code" href="structmi_1_1shader__v3_1_1Interface.html#5186e5aa1cd31c41f52b0f18d5497884" title="Release (delete) the instance of the interface.">release</a>();
<a name="l00223"></a>00223 }
<a name="l00224"></a>00224 
<a name="l00225"></a><a class="code" href="classmi_1_1shader__v3_1_1Access__fb.html#de7dbde11a4b1e6f876fc44c3044b115">00225</a> <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classmi_1_1shader__v3_1_1Framebuffer.html" title="Framebuffer class.">Framebuffer</a> * Access_fb::operator-&gt;()<span class="keyword"> const</span>
<a name="l00226"></a>00226 <span class="keyword"></span>{
<a name="l00227"></a>00227     <span class="keywordflow">return</span> m_fb;
<a name="l00228"></a>00228 }
<a name="l00229"></a>00229 
<a name="l00232"></a><a class="code" href="classmi_1_1shader__v3_1_1Edit__fb.html#703ada112989b4db89e9a838801cf8e6">00232</a> <span class="keyword">inline</span> Edit_fb::Edit_fb(
<a name="l00233"></a>00233     miTag tag)
<a name="l00234"></a>00234   : m_iface(<a class="code" href="mi__shader__if_8h.html#c437703a9041a1930a4c50032f6669ad" title="Acquire an instance of the mental ray C++ shader interface extensions.">mi_get_shader_interface</a>())
<a name="l00235"></a>00235   , m_fb(m_iface-&gt;editFramebuffer(tag))
<a name="l00236"></a>00236   , m_tag(tag)
<a name="l00237"></a>00237 {
<a name="l00238"></a>00238 }
<a name="l00239"></a>00239 
<a name="l00240"></a><a class="code" href="classmi_1_1shader__v3_1_1Edit__fb.html#697878b52dd0a0bc7be5f552ebc4044c">00240</a> <span class="keyword">inline</span> <a class="code" href="classmi_1_1shader__v3_1_1Edit__fb.html#697878b52dd0a0bc7be5f552ebc4044c" title="release resources, unpin database tag">Edit_fb::~Edit_fb</a>()
<a name="l00241"></a>00241 {
<a name="l00242"></a>00242     <span class="keywordflow">if</span> (m_fb != 0) {
<a name="l00243"></a>00243         m_iface-&gt;releaseFramebuffer(m_fb, m_tag);
<a name="l00244"></a>00244     }
<a name="l00245"></a>00245     m_iface-&gt;<a class="code" href="structmi_1_1shader__v3_1_1Interface.html#5186e5aa1cd31c41f52b0f18d5497884" title="Release (delete) the instance of the interface.">release</a>();
<a name="l00246"></a>00246 }
<a name="l00247"></a>00247 
<a name="l00248"></a><a class="code" href="classmi_1_1shader__v3_1_1Edit__fb.html#5e0f7170e0cc14dcbd76781d6450abd7">00248</a> <span class="keyword">inline</span> <a class="code" href="classmi_1_1shader__v3_1_1Framebuffer.html" title="Framebuffer class.">Framebuffer</a> * <a class="code" href="classmi_1_1shader__v3_1_1Edit__fb.html#5e0f7170e0cc14dcbd76781d6450abd7" title="reference the Framebuffer class, read-write access">Edit_fb::operator-&gt;</a>()<span class="keyword"> const</span>
<a name="l00249"></a>00249 <span class="keyword"></span>{
<a name="l00250"></a>00250     <span class="keywordflow">return</span> m_fb;
<a name="l00251"></a>00251 }
<a name="l00252"></a>00252 
<a name="l00253"></a>00253 
<a name="l00254"></a>00254 }}
<a name="l00255"></a>00255 
<a name="l00256"></a>00256 <span class="preprocessor">#endif //SHADER_FRAMEBUFFER_H</span>
</pre></div></div>

<ul class="nav">
<li><a href="index.html">home</a></li>
<li><a href="shader_if_cpp.html">up</a></li>
<li><a href="globalindex.html">index</a></li>
</ul>
<p><a href="copyright.html">Copyright</a> &copy; 1986-2010 by
<a href="http://www.mental.com">mental images GmbH</a><br></p>
</body>
</html>

