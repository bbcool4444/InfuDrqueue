<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Light Map Functions</title>
<meta http-equiv="content-type" content="text/html; charset=us-ascii" />
<meta name="author" content="mental images GmbH" />
<link href="mailto:office@mentalimages.com" rev="made" />
<link href="mental.css" rel="stylesheet" media="all" type="text/css" />
<link rel="shortcut icon" href="mentalicon.ico" type="image/x-icon" />
</head>
<body>
<ul class="nav">
<li><a href="index.html">home</a></li>
<li><a href="node153.html">&laquo;&nbsp;prev</a></li>
<li><a href="node155.html">next&nbsp;&raquo;</a></li>
<li><a href="globalindex.html">index</a></li>
</ul>

<a id="SECTION152"></a>

<ul class="nav tag">
<li><a href="#api:mi_lightmap_edit">mi_lightmap_edit</a></li>
<li><a href="#api:mi_lightmap_edit_end">mi_lightmap_edit_end</a></li>
<li><a href="#api:mi_state_set_pri">mi_state_set_pri</a></li>
</ul>

<h3>Light Map Functions</h3>
<p><a id="INDEX792"></a></p>
<h5 class="anchor" id="api:mi_lightmap_edit">mi_lightmap_edit</h5>
<pre>
    miImg_image *mi_lightmap_edit(
        void               **handle,
        miTag              tag)
</pre>
<p>This function is used by <a href="node135.html#INDEX501">lightmap
shader</a> to begin writing to the
<a href="node78.html#INDEX241">writable texture</a> <i>tag</i>. It
must have been defined in the scene with the <tt>writable</tt>
keyword and was probably passed to the lightmap shader using a
texture parameter. This function clears the texture, and returns an
image pointer that can be used to write pixels with functions like
<i><a href="node144.html#INDEX618">mi_img_put_color</a></i>. The
<i>handle</i> is returned as an opaque pointer that should be
passed to <i><a href="node154.html#INDEX793">mi_lightmap_edit_end</a></i>.</p>

<a id="INDEX793"></a>
<h5 class="anchor" id="api:mi_lightmap_edit_end">mi_lightmap_edit_end</h5>
<pre>
    void mi_lightmap_edit_end(
        void               *handle)
</pre>
<p>Completes writing to the writable texture <i>handle</i>, which
must have been previously created with
<i><a href="node154.html#INDEX792">mi_lightmap_edit</a></i>. The texture is
written to disk.</p>

<h5 class="anchor" id="api:mi_state_set_pri">mi_state_set_pri</h5>
<pre>
    void mi_state_set_pri(
        miState          *state,
        const struct miRc_intersection *pri,
        miUint           pri_idx)
</pre>
<p>Auxiliary function to set the current primitive
and triangle index in the state. See the example
<a href="node135.html#ex_lightmap_shader">lightmap shader</a> for its use.
In previous versions, lightmap shaders had
direct access to corresponding fields in the state structure, like
<code>state&rarr;pri_idx</code>. This was changed to support assemblies.

<ul class="nav">
<li><a href="index.html">home</a></li>
<li><a href="node153.html">&laquo;&nbsp;prev</a></li>
<li><a href="node155.html">next&nbsp;&raquo;</a></li>
<li><a href="globalindex.html">index</a></li>
</ul>
<p><a href="copyright.html">Copyright</a> &copy; 1986-2010 by
<a href="http://www.mental.com">mental images GmbH</a></p>
</body>
</html>
