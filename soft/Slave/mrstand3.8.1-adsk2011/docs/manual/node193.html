<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Verbatim C Sources</title>
<meta http-equiv="content-type" content="text/html; charset=us-ascii" />
<meta name="author" content="mental images GmbH" />
<link href="mailto:office@mentalimages.com" rev="made" />
<link href="mental.css" rel="stylesheet" media="all" type="text/css" />
<link rel="shortcut icon" href="mentalicon.ico" type="image/x-icon" />
</head>
<body>
<ul class="nav">
<li><a href="index.html">home</a></li>
<li><a href="node192.html">&laquo;&nbsp;prev</a></li>
<li><a href="node194.html">next&nbsp;&raquo;</a></li>
<li><a href="globalindex.html">index</a></li>
</ul>
<a id="SECTION191"></a>

<ul class="nav tag">
<li><a href="#api:mi_api_code_verbatim_begin">mi_api_code_verbatim_begin</a></li>
<li><a href="#api:mi_api_code_byte_copy">mi_api_code_byte_copy</a></li>
<li><a href="#api:mi_api_code_verbatim_end">mi_api_code_verbatim_end</a></li>
</ul>

<h3>Verbatim C Sources</h3>
<p>In most cases, compiled C shading functions will be linked to
the program as shared libraries. The library can also link existing
object files and C source files. This is handled by the LINK module
and is outside the scope of the API module. However, API allows
verbatim specification of C sources as part of the scene definition
with the following three calls. Use of these functions is
discouraged except when parsing .mi2 scene files because the
overhead is significantly higher than linking shared libraries.</p>
<p><a id="INDEX1050"></a></p>
<h5 class="anchor" id="api:mi_api_code_verbatim_begin">mi_api_code_verbatim_begin</h5>
<pre>
    miBoolean mi_api_code_verbatim_begin(void)
</pre>
<p>Begin the definition of verbatim code. This call opens a
temporary file in <tt>/usr/tmp</tt> with a unique file name that
receives the C sources.</p>
<p><a id="INDEX1051"></a></p>
<h5 class="anchor" id="api:mi_api_code_byte_copy">mi_api_code_byte_copy</h5>
<pre>
    miBoolean mi_api_code_byte_copy(
        int             length,    /* # of data bytes */
        miUchar         *bytes)    /* C src data array */
</pre>
<p>Append ascii source text to the C source file opened by the
preceding call. The <i>bytes</i> string is expected to contain
<i>length</i> characters, not counting a trailing null byte (which
is not required). The <i>bytes</i> pointer, like any other string
passed to an API call, is released using <i>mi_mem_release</i>.</p>
<p><a id="INDEX1052"></a></p>
<h5 class="anchor" id="api:mi_api_code_verbatim_end">mi_api_code_verbatim_end</h5>
<pre>
    miBoolean mi_api_code_verbatim_end(void)
</pre>
<p>After the sources have been stored with one or more byte copy
calls, this call completes the verbatim source definition. The
temporary file is closed, compiled, linked, loaded, and
removed.</p>
<ul class="nav">
<li><a href="index.html">home</a></li>
<li><a href="node192.html">&laquo;&nbsp;prev</a></li>
<li><a href="node194.html">next&nbsp;&raquo;</a></li>
<li><a href="globalindex.html">index</a></li>
</ul>
<p><a href="copyright.html">Copyright</a> &copy; 1986-2010 by
<a href="http://www.mental.com">mental images GmbH</a></p>
</body>
</html>
