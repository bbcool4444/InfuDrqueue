<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Lens Effects</title>
<meta http-equiv="content-type" content="text/html; charset=us-ascii" />
<meta name="author" content="mental images GmbH" />
<link href="mailto:office@mentalimages.com" rev="made" />
<link href="mental.css" rel="stylesheet" media="all" type="text/css" />
<link rel="shortcut icon" href="mentalicon.ico" type="image/x-icon" />
</head>
<body>
<ul class="nav">
<li><a href="index.html">home</a></li>
<li><a href="node28.html">&laquo;&nbsp;prev</a></li>
<li><a href="node30.html">next&nbsp;&raquo;</a></li>
<li><a href="globalindex.html">index</a></li>
</ul>
<a id="SECTION27"></a>
<h2>Lens Effects</h2>
<p><a id="INDEX58"></a> Lens effects are distortions
of the rendered image achieved by changing the light path through
the camera lens. Because lens effects are applied to
first-generation rays, there is no loss of quality that would be
unavoidable if the distortion were applied in a post-processing
stage after rendering.</p>
<p>Lens effects are introduced by specifying one or more lens
shaders in the <tt>camera</tt> statement. If no lens shaders are
present, the standard <a href="node124.html#INDEX488">pinhole
camera</a> is used. Each lens shader is called with two state
variables that specify the ray origin and the ray direction. The
lens shader calculates a new origin and a new direction, and casts
an eye ray using the <i>mi_trace_eye</i> function. The first lens
shader always gets the position of the
<a href="node124.html#INDEX488">pinhole camera</a>. All following lens
shaders get the origin and direction that the previous lens shader
used when calling <i>mi_trace_eye</i>.</p>
<p>Some lens shaders imply <a href="node140.html#INDEX556">ray
marching</a>. If lens shaders change the origin or direction of a
ray they only work correctly if scanline rendering is turned off.
This is normally automated and does not require the user to modify
the scene: lens shader declarations should supply this information
to inform mental ray that the shader requires
<a href="node140.html#INDEX556">ray marching</a>.</p>
<p>Lens shaders that do not change the origin or direction of a ray
are also useful, for example to perform color correction or special
data collection. Such shaders should not disable scanline mode in
their declaration.</p>
<ul class="nav">
<li><a href="index.html">home</a></li>
<li><a href="node28.html">&laquo;&nbsp;prev</a></li>
<li><a href="node30.html">next&nbsp;&raquo;</a></li>
<li><a href="globalindex.html">index</a></li>
</ul>
<p><a href="copyright.html">Copyright</a> &copy; 1986-2010 by
<a href="http://www.mental.com">mental images GmbH</a></p>
</body>
</html>
