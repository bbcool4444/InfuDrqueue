<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Extracting Cg Shader Code</title>
<meta http-equiv="content-type" content="text/html; charset=us-ascii" />
<meta name="author" content="mental images GmbH" />
<link href="mailto:office@mentalimages.com" rev="made" />
<link href="mental.css" rel="stylesheet" media="all" type="text/css" />
<link rel="shortcut icon" href="mentalicon.ico" type="image/x-icon" />
</head>
<body>
<ul class="nav">
<li><a href="index.html">home</a></li>
<li><a href="node172.html">&laquo;&nbsp;prev</a></li>
<li><a href="node174.html">next&nbsp;&raquo;</a></li>
<li><a href="globalindex.html">index</a></li>
</ul>

<a id="SECTION171"></a>
<h3>Extracting Cg Shader Code</h3>
<p>
<span class="depr">Deprecated</span>
<p>
mental ray will use the <b><a id="INDEX853"></a>Cg</b> compiler
to build hardware shaders from
shader graphs in Phenomena. This involves collecting and preparing
the <a href="node173.html#INDEX853">Cg</a> code that implements the
subshaders that form the Phenomenon, passing this to
<a href="node178.html#INDEX854">NVIDIA</a>'s
<a href="node173.html#INDEX853">Cg</a> compiler, and sending the resulting
assembly code to the graphics board. This process is normally
invisible and automatic.</p>
<p>However, it is sometimes useful to extract the
<a href="node173.html#INDEX853">Cg</a> compiler input and output for
debugging purposes, or to transplant the shader into a game
platform. This allows mental ray to be used as a prototyping system
for shader development with the full benefit of Phenomenon
construction; and then extracting the resulting hardware shaders
for use in a game engine. This is done with the command-line
options</p>
<pre>
    -hardware_echo "path" --
    -hardware_echo error "path" --
</pre>
<p>The first variant saves all shaders into the directory
<i>path</i>; the second saves only those shaders for which the
<a href="node173.html#INDEX853">Cg</a> compiler has reported an
error. The latter mode is intended for debugging by shader authors.
Saving a shader means creating four files per material that uses a
<a href="node173.html#INDEX853">Cg</a> hardware shader:</p>
<ul>
<li><i>materialname.cg</i> contains the <a href="node173.html#INDEX853">Cg</a>
input to the compiler.</li>
<li><i>materialname.asm</i> contains the assembly output of the
<a href="node173.html#INDEX853">Cg</a> compiler.</li>
<li><i>materialname.C</i> contains sample C++ code that installs
the shader with the appropriate OpenGL calls.</li>
<li><i>materialname.txt</i> contains informational messages about
the construction of the shader graph with all its connections.</li>
</ul>
<p>Note that the file names are constructed from the name of the
material containing the hardware shaders, not from the name of a
shader, because many shaders are usually collected to build a
<a href="node173.html#INDEX853">Cg</a> input file, and because two
materials using the same shader with different parameters will
result in different <a href="node173.html#INDEX853">Cg</a>
files.</p>
<ul class="nav">
<li><a href="index.html">home</a></li>
<li><a href="node172.html">&laquo;&nbsp;prev</a></li>
<li><a href="node174.html">next&nbsp;&raquo;</a></li>
<li><a href="globalindex.html">index</a></li>
</ul>
<p><a href="copyright.html">Copyright</a> &copy; 1986-2010 by
<a href="http://www.mental.com">mental images GmbH</a></p>
</body>
</html>
