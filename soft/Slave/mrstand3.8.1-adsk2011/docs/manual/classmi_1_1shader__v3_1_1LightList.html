<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mental ray Interface: mi::shader_v3::LightList Class Reference</title>
<link href="mi_iface.css" rel="stylesheet" type="text/css">
</head>
<body>
<ul class="nav">
<li><a href="index.html">home</a></li>
<li><a href="shader_if_cpp.html">up</a></li>
<li><a href="globalindex.html">index</a></li>
</ul>

<!-- Generated by Doxygen 1.5.6 -->
  <div class="navpath"><a class="el" href="namespacemi.html">mi</a>::<a class="el" href="namespacemi_1_1shader__v3.html">shader_v3</a>::<a class="el" href="classmi_1_1shader__v3_1_1LightList.html">LightList</a>
  </div>
<div class="contents">
<h1>mi::shader_v3::LightList Class Reference</h1><!-- doxytag: class="mi::shader_v3::LightList" -->Light lists, used internally by <a class="el" href="classmi_1_1shader__v3_1_1LightIterator.html" title="Iterate over shader or instance light lists.">LightIterator</a>.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="shader__lightlist_8h-source.html">shader_lightlist.h</a>&gt;</code>
<p>

<p>
<a href="classmi_1_1shader__v3_1_1LightList-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmi_1_1shader__v3_1_1LightList.html#8f39078ac3dc3c627350a3ed156f0fbb">set_current</a> (size_t current)=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">sets the current light in the light list  <a href="#8f39078ac3dc3c627350a3ed156f0fbb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmi_1_1shader__v3_1_1LightList.html#f564efcc2391b917dd6e4a5dd5f9e66f">get_current</a> () const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get the index of the current light  <a href="#f564efcc2391b917dd6e4a5dd5f9e66f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmi_1_1shader__v3_1_1LightList.html#74ddd47d9aca52b27dc66a75c2040b9e">sample</a> ()=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">sample the current light source  <a href="#74ddd47d9aca52b27dc66a75c2040b9e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual miScalar&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmi_1_1shader__v3_1_1LightList.html#c94156561c040758d7ae96061535144e">get_dot_nl</a> () const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return dot product between light direction and surface normal  <a href="#c94156561c040758d7ae96061535144e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual const miVector &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmi_1_1shader__v3_1_1LightList.html#bcf62c4fc54151a00f1bf66b50822666">get_direction</a> () const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return the direction to the light source  <a href="#bcf62c4fc54151a00f1bf66b50822666"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmi_1_1shader__v3_1_1LightList.html#837154fdd929584a9d809b48e305e5f6">get_contribution</a> (miColor *c) const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get the color contribution of the light source  <a href="#837154fdd929584a9d809b48e305e5f6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmi_1_1shader__v3_1_1LightList.html#21f554dd0608a3bbf073d3259a6ecfa7">get_contribution</a> (miSpectrum *s) const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get the spectrum contribution of the light source  <a href="#21f554dd0608a3bbf073d3259a6ecfa7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmi_1_1shader__v3_1_1LightList.html#9bd4b3b0de2bcd560763b9e98b5ac71c">get_number_of_samples</a> () const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">returns the number of light samples taken so far.  <a href="#9bd4b3b0de2bcd560763b9e98b5ac71c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual miTag&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmi_1_1shader__v3_1_1LightList.html#7fc1b496e511af71506e50ac701230bf">get_light_tag</a> (size_t current) const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get the requested light tag  <a href="#7fc1b496e511af71506e50ac701230bf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmi_1_1shader__v3_1_1LightList.html#5bd5d7b4be9c83ea8c42f78545cc7ee3">get_number_of_lights</a> () const =0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">obtain the number of lights in the list  <a href="#5bd5d7b4be9c83ea8c42f78545cc7ee3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmi_1_1shader__v3_1_1LightList.html#6c1a0f200a32fa1030e20413f81d1610">connect</a> ()=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">increase reference count  <a href="#6c1a0f200a32fa1030e20413f81d1610"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmi_1_1shader__v3_1_1LightList.html#664882fddb11ce1bfcbec3ee4a5ef2d2">release</a> ()=0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">decrease reference count  <a href="#664882fddb11ce1bfcbec3ee4a5ef2d2"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Light lists, used internally by <a class="el" href="classmi_1_1shader__v3_1_1LightIterator.html" title="Iterate over shader or instance light lists.">LightIterator</a>. 
<p>
The <a class="el" href="classmi_1_1shader__v3_1_1LightList.html" title="Light lists, used internally by LightIterator.">LightList</a> class manages the iteration over light sources. The class is only used internally by the <a class="el" href="classmi_1_1shader__v3_1_1LightIterator.html" title="Iterate over shader or instance light lists.">LightIterator</a> class. The class is reference counted to allow several iterators to refer to the same light list. However, the class maintains only one cache for the results of light sampling. Therefore, if there are several LightIterators referencing the same light list, then most of the class "get" methods will return results obtained from the most recent call of the sample method. <hr><h2>Member Function Documentation</h2>
<a class="anchor" name="8f39078ac3dc3c627350a3ed156f0fbb"></a><!-- doxytag: member="mi::shader_v3::LightList::set_current" ref="8f39078ac3dc3c627350a3ed156f0fbb" args="(size_t current)=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual size_t mi::shader_v3::LightList::set_current           </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>current</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
sets the current light in the light list 
<p>
The method is used by light iterators to set the light list to the wanted light. It is used when dereferencing a light iterator to specify which light should be sampled.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>current</em>&nbsp;</td><td>identifies the light to be made the current one. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the current light index </dd></dl>

<p>Referenced by <a class="el" href="shader__lightlist_8h-source.html#l00387">mi::shader_v3::LightIterator::operator-&gt;()</a>.</p>

</div>
</div><p>
<a class="anchor" name="f564efcc2391b917dd6e4a5dd5f9e66f"></a><!-- doxytag: member="mi::shader_v3::LightList::get_current" ref="f564efcc2391b917dd6e4a5dd5f9e66f" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual size_t mi::shader_v3::LightList::get_current           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
get the index of the current light 
<p>
The method is used by light iterators to obtain the current light index.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the current light index </dd></dl>

</div>
</div><p>
<a class="anchor" name="74ddd47d9aca52b27dc66a75c2040b9e"></a><!-- doxytag: member="mi::shader_v3::LightList::sample" ref="74ddd47d9aca52b27dc66a75c2040b9e" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool mi::shader_v3::LightList::sample           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
sample the current light source 
<p>
The method samples the current light and caches the obtained results.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>true if a sample was obtained and further samples should be taken, false if no further samples are required. </dd></dl>

</div>
</div><p>
<a class="anchor" name="c94156561c040758d7ae96061535144e"></a><!-- doxytag: member="mi::shader_v3::LightList::get_dot_nl" ref="c94156561c040758d7ae96061535144e" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual miScalar mi::shader_v3::LightList::get_dot_nl           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
return dot product between light direction and surface normal 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the dot product between the light direction and the surface normal, as obtained and cached during the last sampling. </dd></dl>

</div>
</div><p>
<a class="anchor" name="bcf62c4fc54151a00f1bf66b50822666"></a><!-- doxytag: member="mi::shader_v3::LightList::get_direction" ref="bcf62c4fc54151a00f1bf66b50822666" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual const miVector&amp; mi::shader_v3::LightList::get_direction           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
return the direction to the light source 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the direction vector to the light source, as obtained and cached during the last sampling. </dd></dl>

</div>
</div><p>
<a class="anchor" name="837154fdd929584a9d809b48e305e5f6"></a><!-- doxytag: member="mi::shader_v3::LightList::get_contribution" ref="837154fdd929584a9d809b48e305e5f6" args="(miColor *c) const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void mi::shader_v3::LightList::get_contribution           </td>
          <td>(</td>
          <td class="paramtype">miColor *&nbsp;</td>
          <td class="paramname"> <em>c</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
get the color contribution of the light source 
<p>
The method gets the cached color contribution obtained from the light source during the last sampling.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>c</em>&nbsp;</td><td>will contain the color contribution of the light source on return </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="21f554dd0608a3bbf073d3259a6ecfa7"></a><!-- doxytag: member="mi::shader_v3::LightList::get_contribution" ref="21f554dd0608a3bbf073d3259a6ecfa7" args="(miSpectrum *s) const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void mi::shader_v3::LightList::get_contribution           </td>
          <td>(</td>
          <td class="paramtype">miSpectrum *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
get the spectrum contribution of the light source 
<p>
The method gets the cached spectrum contribution obtained from the light source during the last sampling.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>will contain the spectrum contribution of the light source on return </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="9bd4b3b0de2bcd560763b9e98b5ac71c"></a><!-- doxytag: member="mi::shader_v3::LightList::get_number_of_samples" ref="9bd4b3b0de2bcd560763b9e98b5ac71c" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int mi::shader_v3::LightList::get_number_of_samples           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
returns the number of light samples taken so far. 
<p>
The method should be invoked after the sample method returned false. It allows to weight the color/spectrum contributions of a light source with the number of samples taken.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the number of samples taken for the current light source. </dd></dl>

</div>
</div><p>
<a class="anchor" name="7fc1b496e511af71506e50ac701230bf"></a><!-- doxytag: member="mi::shader_v3::LightList::get_light_tag" ref="7fc1b496e511af71506e50ac701230bf" args="(size_t current) const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual miTag mi::shader_v3::LightList::get_light_tag           </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>current</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
get the requested light tag 
<p>
The method obtains the light tag at the current'th position in the light list.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>current</em>&nbsp;</td><td>gives the index of the light in the list. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the light tag at the requested position in the list. </dd></dl>

<p>Referenced by <a class="el" href="shader__lightlist_8h-source.html#l00382">mi::shader_v3::LightIterator::operator*()</a>.</p>

</div>
</div><p>
<a class="anchor" name="5bd5d7b4be9c83ea8c42f78545cc7ee3"></a><!-- doxytag: member="mi::shader_v3::LightList::get_number_of_lights" ref="5bd5d7b4be9c83ea8c42f78545cc7ee3" args="() const =0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual size_t mi::shader_v3::LightList::get_number_of_lights           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td> const<code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
obtain the number of lights in the list 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>the number of lights in the light list. </dd></dl>

<p>Referenced by <a class="el" href="shader__lightlist_8h-source.html#l00406">mi::shader_v3::LightIterator::at_end()</a>.</p>

</div>
</div><p>
<a class="anchor" name="6c1a0f200a32fa1030e20413f81d1610"></a><!-- doxytag: member="mi::shader_v3::LightList::connect" ref="6c1a0f200a32fa1030e20413f81d1610" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void mi::shader_v3::LightList::connect           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
increase reference count 
<p>
Tell the light list that one more object (most likely a <a class="el" href="classmi_1_1shader__v3_1_1LightIterator.html" title="Iterate over shader or instance light lists.">LightIterator</a>) has connected to the list. As long as there are objects connected, the light list is not deleted. 
<p>Referenced by <a class="el" href="shader__lightlist_8h-source.html#l00357">mi::shader_v3::LightIterator::LightIterator()</a>, and <a class="el" href="shader__lightlist_8h-source.html#l00369">mi::shader_v3::LightIterator::operator=()</a>.</p>

</div>
</div><p>
<a class="anchor" name="664882fddb11ce1bfcbec3ee4a5ef2d2"></a><!-- doxytag: member="mi::shader_v3::LightList::release" ref="664882fddb11ce1bfcbec3ee4a5ef2d2" args="()=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void mi::shader_v3::LightList::release           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
decrease reference count 
<p>
Tell the light list that an object (most likely a <a class="el" href="classmi_1_1shader__v3_1_1LightIterator.html" title="Iterate over shader or instance light lists.">LightIterator</a>) releases its connection to the list. If there are no more connections left, then the <a class="el" href="classmi_1_1shader__v3_1_1LightList.html" title="Light lists, used internally by LightIterator.">LightList</a> will be deleted. 
<p>Referenced by <a class="el" href="shader__lightlist_8h-source.html#l00369">mi::shader_v3::LightIterator::operator=()</a>, and <a class="el" href="shader__lightlist_8h-source.html#l00364">mi::shader_v3::LightIterator::~LightIterator()</a>.</p>

</div>
</div><p>
</div>

<ul class="nav">
<li><a href="index.html">home</a></li>
<li><a href="shader_if_cpp.html">up</a></li>
<li><a href="globalindex.html">index</a></li>
</ul>
<p><a href="copyright.html">Copyright</a> &copy; 1986-2010 by
<a href="http://www.mental.com">mental images GmbH</a><br></p>
</body>
</html>

